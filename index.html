<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>healthy brunch club - start your monday right | bio brunch wien</title>
    <meta name="description" content="gesunder bio-brunch jeden montag in wien. regionale zutaten, live-musik und positive vibes. jetzt buchen in der gumpendorfer straße 9.">
    
    <!-- Google Font Link -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Warm, Natural Color Palette */
            --sage-green: #A8C09A;
            --mint-green: #B8D4B2;
            --peach: #FFB5A7;
            --coral: #F8AD9D;
            --cream: #FFF5EB;
            --warm-white: #FFFBF5;
            --terracotta: #D4735E;
            --olive: #8B9474;
            --sand: #E8DCC4;
            --blush: #FCD5CE;
            
            /* Text Colors */
            --text-dark: #3A3A3A;
            --text-medium: #6B6B6B;
            --text-light: #9A9A9A;
            
            /* Gradients */
            --morning-gradient: linear-gradient(135deg, #FFE5D9 0%, #FEC89A 50%, #F8AD9D 100%);
            --nature-gradient: linear-gradient(135deg, #B8D4B2 0%, #A8C09A 50%, #8B9474 100%);
            --warm-gradient: linear-gradient(180deg, #FFF5EB 0%, #FFE5D9 50%, #FCD5CE 100%);
            
            /* Typography */
            --font-primary: 'lora', sans-serif;
            --font-accent: 'lora', cursive;
            
            /* Shadows */
            --soft-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --hover-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            --card-shadow: 0 2px 15px rgba(0, 0, 0, 0.06);
        }

        body {
            font-family: var(--font-primary);
            line-height: 1.6;
            color: var(--text-dark);
            background: var(--warm-white);
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Floating Event Window */
        .event-window {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 320px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            z-index: 999;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .event-window.collapsed {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
        }

        .event-window.collapsed .event-content {
            display: none;
        }

        .event-toggle {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--sage-green);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .event-window.collapsed .event-toggle {
            width: 60px;
            height: 60px;
            top: 0;
            right: 0;
            font-size: 24px;
        }

        .event-content {
            padding: 25px;
        }

        .event-header {
            background: var(--morning-gradient);
            color: white;
            padding: 20px;
            margin: -25px -25px 20px;
        }

        .event-header h3 {
            font-family: var(--font-accent);
            font-size: 22px;
            margin-bottom: 5px;
        }

        .event-header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .event-details {
            font-size: 14px;
            line-height: 1.6;
            color: var(--text-medium);
            margin-bottom: 20px;
        }

        .event-details strong {
            color: var(--text-dark);
            display: block;
            margin-top: 10px;
        }

        .audio-player {
            background: var(--cream);
            border-radius: 15px;
            padding: 15px;
            margin-top: 20px;
        }

        .audio-player h4 {
            font-size: 14px;
            color: var(--sage-green);
            margin-bottom: 10px;
        }

        .audio-player audio {
            width: 100%;
            height: 35px;
        }

        /* Navigation */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 15px 0;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            height: 50px;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 30px;
            align-items: center;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-medium);
            font-weight: 500;
            font-size: 15px;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--sage-green);
        }

        .book-btn {
            background: var(--morning-gradient);
            color: white !important;
            padding: 10px 25px;
            border-radius: 25px;
            font-weight: 600;
            box-shadow: var(--soft-shadow);
            transition: all 0.3s ease;
        }

        .book-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--hover-shadow);
        }

        /* Hero Section */
        .hero {
            padding: 120px 20px 80px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            background: var(--warm-gradient);
            position: relative;
            overflow: hidden;
        }

        .hero-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .hero-content h1 {
            font-family: var(--font-accent);
            font-size: clamp(48px, 6vw, 72px);
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 20px;
            line-height: 1.1;
        }

        .hero-content h1 span {
            color: var(--sage-green);
        }

        .hero-content p {
            font-size: 18px;
            color: var(--text-medium);
            margin-bottom: 30px;
            line-height: 1.8;
        }

        .hero-buttons {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .btn-primary {
            background: var(--morning-gradient);
            color: white;
            padding: 15px 35px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            box-shadow: var(--soft-shadow);
            transition: all 0.3s ease;
            display: inline-block;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: var(--hover-shadow);
        }

        .btn-secondary {
            background: white;
            color: var(--sage-green);
            padding: 15px 35px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            border: 2px solid var(--sage-green);
            transition: all 0.3s ease;
            display: inline-block;
        }

        .btn-secondary:hover {
            background: var(--sage-green);
            color: white;
            transform: translateY(-3px);
        }

        .hero-visual {
            position: relative;
            height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--cream);
            border-radius: 30px;
            box-shadow: var(--hover-shadow);
        }

        /* Menu Section */
        .menu-section {
            padding: 80px 20px;
            background: white;
            position: relative;
        }

        .menu-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .menu-header h2 {
            font-family: var(--font-accent);
            font-size: clamp(36px, 5vw, 56px);
            color: var(--text-dark);
            margin-bottom: 10px;
        }

        .menu-header p {
            font-size: 18px;
            color: var(--text-medium);
        }

        /* Menu Grid */
        .menu-grid {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
        }

        .menu-card {
            background: var(--warm-white);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .menu-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--nature-gradient);
        }

        .menu-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .menu-category-title {
            font-family: var(--font-accent);
            font-size: 28px;
            color: var(--sage-green);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .menu-items {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .menu-item {
            padding: 15px;
            background: white;
            border-radius: 15px;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .menu-item:hover {
            border-color: var(--sage-green);
            background: rgba(168, 192, 154, 0.05);
        }

        .menu-item-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 5px;
        }

        .menu-item-name {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 16px;
            flex: 1;
        }

        .menu-item-description {
            font-size: 14px;
            color: var(--text-medium);
            line-height: 1.5;
        }

        .menu-tags {
            display: flex;
            gap: 5px;
            margin-top: 8px;
            flex-wrap: wrap;
        }

        .menu-tag {
            background: var(--sage-green);
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }

        .no-menu-message {
            text-align: center;
            padding: 40px;
            color: var(--text-medium);
            font-style: italic;
            grid-column: 1 / -1;
        }

        /* Features Section */
        .features-section {
            padding: 80px 20px;
            background: var(--cream);
        }

        .features-grid {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            margin-top: 50px;
        }

        .feature-card {
            text-align: center;
            padding: 40px 30px;
            background: white;
            border-radius: 25px;
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .feature-icon {
            width: 80px;
            height: 80px;
            background: var(--morning-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 36px;
        }

        .feature-card h3 {
            font-size: 22px;
            color: var(--text-dark);
            margin-bottom: 15px;
        }

        .feature-card p {
            color: var(--text-medium);
            line-height: 1.6;
        }

        /* Contact Form Section */
        .contact-section {
            padding: 80px 20px;
            background: white;
        }

        .contact-container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--warm-white);
            padding: 50px;
            border-radius: 30px;
            box-shadow: var(--hover-shadow);
        }

        .contact-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .contact-header h2 {
            font-family: var(--font-accent);
            font-size: clamp(36px, 5vw, 48px);
            color: var(--text-dark);
            margin-bottom: 10px;
        }

        /* Footer */
        .footer {
            background: var(--text-dark);
            color: white;
            padding: 60px 20px 30px;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-section h4 {
            font-family: var(--font-accent);
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--peach);
        }

        .footer-section p,
        .footer-section a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            line-height: 1.8;
            transition: color 0.3s ease;
        }

        .footer-section a:hover {
            color: var(--peach);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.6);
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .hero-container {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .hero-visual {
                height: 300px;
            }

            .menu-grid {
                grid-template-columns: 1fr;
            }

            .event-window {
                right: 20px;
                bottom: 20px;
                width: 280px;
            }
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="nav" id="navbar">
        <div class="nav-container">
            <a href="#home" class="logo">
                <img src="content/images/logo.png" alt="Healthy Brunch Club" class="logo"/>
            </a>
            
            <ul class="nav-links">
                <li><a href="#home">home</a></li>
                <li><a href="#menu">speisekarte</a></li>
                <li><a href="#features">features</a></li>
                <li><a href="#about">über uns</a></li>
                <li><a href="#contact">kontakt</a></li>
                <li><a href="#booking" class="book-btn">tisch reservieren</a></li>
            </ul>
        </div>
    </nav>

    <!-- Floating Event Window -->
    <div class="event-window" id="eventWindow">
        <button class="event-toggle" onclick="toggleEventWindow()">
            <span id="toggleIcon">−</span>
        </button>
        <div class="event-content" id="eventContent">
            <!-- Event content will be loaded here -->
        </div>
    </div>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Hero Section -->
        <section class="hero" id="home">
            <div class="hero-container">
                <div class="hero-content">
                    <h1>start your monday with <span>healthy vibes</span></h1>
                    <p>erlebe die perfekte kombination aus bio-zutaten, liebevoll zubereiteten speisen und entspannter atmosphäre. jeden montag von 8-14 uhr.</p>
                    
                    <div class="hero-buttons">
                        <a href="#booking" class="btn-primary">jetzt reservieren</a>
                        <a href="#menu" class="btn-secondary">speisekarte ansehen</a>
                    </div>
                </div>
                
                <div class="hero-visual">
                    <h3 style="color: var(--sage-green); font-family: var(--font-accent);">Dein gesunder Start in die Woche</h3>
                </div>
            </div>
        </section>

        <!-- Menu Section -->
        <section class="menu-section" id="menu">
            <div class="menu-header">
                <h2>unsere liebevoll kuratierte speisekarte</h2>
                <p>100% bio, regional und mit ganz viel liebe zubereitet</p>
            </div>

            <div class="menu-grid" id="menuGrid">
                <!-- Menu items will be loaded dynamically -->
                <div class="no-menu-message">
                    <p>Die Speisekarte wird geladen...</p>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="features-section" id="features">
            <div class="menu-header">
                <h2>was uns besonders macht</h2>
                <p>mehr als nur frühstück – eine philosophie</p>
            </div>

            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">🌱</div>
                    <h3>100% bio & regional</h3>
                    <p>alle zutaten stammen von lokalen bio-bauern aus der umgebung. frisch, nachhaltig und voller nährstoffe.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">🎵</div>
                    <h3>live dj sets</h3>
                    <p>jeden montag begleiten dich sanfte lounge-klänge durch deinen morgen. musik zum wohlfühlen.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">💚</div>
                    <h3>darmgesundheit</h3>
                    <p>spezielle zutaten und kombinationen, die deine verdauung unterstützen und für innere balance sorgen.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">☕</div>
                    <h3>specialty coffee</h3>
                    <p>fair-trade kaffee von lokalen röstern, mit liebe zubereitet. auch mit pflanzlichen milchalternativen.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">♻️</div>
                    <h3>zero waste</h3>
                    <p>nachhaltige verpackungen, kompostierung und bewusster umgang mit ressourcen für unsere umwelt.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">👥</div>
                    <h3>community</h3>
                    <p>ein ort der begegnung, wo gleichgesinnte zusammenkommen und den tag gemeinsam beginnen.</p>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section class="contact-section" id="about">
            <div class="contact-container">
                <div class="contact-header">
                    <h2>unsere geschichte</h2>
                </div>
                <div style="text-align: center; max-width: 600px; margin: 0 auto 40px;">
                    <p style="font-size: 18px; line-height: 1.8; color: var(--text-medium);">
                        drei schwestern, eine vision: gesundes essen zugänglich machen. was als familientradition begann, ist heute ein ort der begegnung für alle, die wert auf bewusste ernährung legen.
                    </p>
                    <p style="font-size: 16px; line-height: 1.8; color: var(--text-medium); margin-top: 20px;">
                        nach tinas diagnose einer chronischen darmentzündung haben wir uns intensiv mit entzündungshemmender ernährung beschäftigt. diese erfahrung teilen wir nun mit euch – jeden montag in unserem gemütlichen lokal in der gumpendorfer straße.
                    </p>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section class="contact-section" id="contact">
            <div class="contact-container">
                <div class="contact-header">
                    <h2>kontakt & reservierung</h2>
                    <p>sichere dir deinen platz für ein unvergessliches brunch-erlebnis</p>
                </div>
                <div style="text-align: center;">
                    <p><strong>📍 Adresse:</strong> Gumpendorfer Straße 9, 1060 Wien</p>
                    <p><strong>🕐 Öffnungszeiten:</strong> Montag: 08:00 - 14:00 Uhr</p>
                    <p><strong>📞 Telefon:</strong> +43 676 123 456 78</p>
                    <p><strong>✉️ E-Mail:</strong> hello@healthybrunchclub.at</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section">
                <h4>öffnungszeiten</h4>
                <p>montag: 08:00 - 14:00 uhr</p>
                <p>dienstag - sonntag: geschlossen</p>
                <p style="margin-top: 15px;">reservierungen empfohlen!</p>
            </div>

            <div class="footer-section">
                <h4>kontakt</h4>
                <p>gumpendorfer straße 9<br>1060 wien</p>
                <p>+43 676 123 456 78</p>
                <p>hello@healthybrunchclub.at</p>
            </div>

            <div class="footer-section">
                <h4>healthy brunch club</h4>
                <p>start your monday right with healthy food, good vibes, and amazing people.</p>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2025 healthy brunch club wien. made with love in vienna.</p>
        </div>
    </footer>

    <script>
        // Enhanced CMS Content Loader
        (function() {
            'use strict';

            // Configuration
            const CONFIG = {
                refreshInterval: 300000, // 5 minutes
                animationDelay: 100,
                fallbackDelay: 2000 // 2 seconds before showing fallback
            };

            // Fallback Menu Data
            const FALLBACK_MENU_DATA = [
                {
                    title: "morning rituals",
                    icon: "🌅",
                    order: 1,
                    items: [
                        {
                            name: "warmes wasser mit bio-zitrone",
                            description: "der perfekte start für deine verdauung",
                            tags: ["detox", "vegan"]
                        },
                        {
                            name: "golden milk latte",
                            description: "kurkuma, ingwer, zimt & hafermilch",
                            tags: ["anti-inflammatory", "lactosefrei"]
                        },
                        {
                            name: "matcha zeremonie",
                            description: "ceremonial grade matcha, aufgeschäumt",
                            tags: ["energy", "antioxidants"]
                        }
                    ]
                },
                {
                    title: "power bowls",
                    icon: "🥣",
                    order: 2,
                    items: [
                        {
                            name: "açaí sunrise bowl",
                            description: "açaí, banane, beeren, granola, kokosflocken",
                            tags: ["superfood", "vegan"]
                        },
                        {
                            name: "premium porridge",
                            description: "haferflocken, chia, hanfsamen, heidelbeeren, mandeln",
                            tags: ["glutenfrei", "protein"]
                        },
                        {
                            name: "buddha bowl deluxe",
                            description: "quinoa, hummus, grillgemüse, tahini-dressing",
                            tags: ["protein-rich", "vegan"]
                        }
                    ]
                },
                {
                    title: "egg creations",
                    icon: "🥚",
                    order: 3,
                    items: [
                        {
                            name: "shakshuka wien style",
                            description: "pochierte eier in würziger tomatensauce, feta, kräuter",
                            tags: ["vegetarisch", "spicy"]
                        },
                        {
                            name: "eggs benedict deluxe",
                            description: "sauerteigbrot, pochierte eier, avocado-hollandaise",
                            tags: ["signature"]
                        },
                        {
                            name: "farmers omelette",
                            description: "bio-eier, saisongemüse, bergkäse, kräuter",
                            tags: ["protein", "glutenfrei"]
                        }
                    ]
                }
            ];

            // Fallback Event Data
            const FALLBACK_EVENT_DATA = [
                {
                    title: "next monday special",
                    artist: "dj cosmic kitchen",
                    date: "2025-01-27T09:00:00+01:00",
                    description: "erlebe entspannte lounge-klänge während deines brunches mit unserem special guest dj cosmic kitchen!",
                    musicStyle: "downtempo, organic house, world fusion",
                    startTime: "9:00 uhr",
                    audioPreview: "content/audio/artist1.mp3",
                    active: true
                }
            ];

            // Create menu item HTML
            function createMenuItemHTML(item) {
                return `
                    <div class="menu-item">
                        <div class="menu-item-header">
                            <span class="menu-item-name">${item.name || ''}</span>
                        </div>
                        <p class="menu-item-description">${item.description || ''}</p>
                        ${item.tags && item.tags.length > 0 ? `
                            <div class="menu-tags">
                                ${item.tags.map(tag => `<span class="menu-tag">${tag}</span>`).join('')}
                            </div>
                        ` : ''}
                    </div>
                `;
            }

            // Create menu category card
            function createMenuCategoryCard(category) {
                const card = document.createElement('div');
                card.className = 'menu-card';
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                
                card.innerHTML = `
                    <h3 class="menu-category-title">${category.title} ${category.icon || ''}</h3>
                    <div class="menu-items">
                        ${category.items && category.items.length > 0 
                            ? category.items.map(item => createMenuItemHTML(item)).join('')
                            : '<p style="color: var(--text-light); font-style: italic;">Keine Einträge vorhanden</p>'
                        }
                    </div>
                `;
                
                return card;
            }

            // Animate cards
            function animateCards(cards) {
                cards.forEach((card, index) => {
                    card.style.transition = `all 0.6s ease ${index * 0.1}s`;
                    
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, CONFIG.animationDelay + (index * 100));
                });
            }

            // Load and display menu
            async function loadMenu() {
                const menuGrid = document.getElementById('menuGrid');
                if (!menuGrid) return;

                console.log('Loading menu...');
                
                let menuData = null;

                // Try to load from CMS
                try {
                    const response = await fetch('/.netlify/functions/get-menu');
                    if (response.ok) {
                        menuData = await response.json();
                        console.log('Menu loaded from CMS:', menuData);
                        
                        if (!menuData || menuData.length === 0) {
                            throw new Error('CMS returned empty menu data');
                        }
                    } else {
                        throw new Error(`CMS responded with status: ${response.status}`);
                    }
                } catch (error) {
                    console.log('CMS not available, using fallback data:', error.message);
                    menuData = FALLBACK_MENU_DATA;
                }

                // Display menu data
                displayMenuData(menuGrid, menuData);
            }

            // Display menu data
            function displayMenuData(menuGrid, menuData) {
                // Sort categories by order
                menuData.sort((a, b) => (a.order || 0) - (b.order || 0));

                // Clear existing content
                menuGrid.innerHTML = '';

                // Create and append category cards
                const cards = menuData.map(category => createMenuCategoryCard(category));
                cards.forEach(card => menuGrid.appendChild(card));

                // Animate cards
                animateCards(cards);

                console.log(`${menuData.length} menu categories displayed successfully`);
            }

            // Format event date
            function formatEventDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleDateString('de-AT', {
                    weekday: 'long',
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });
            }

            // Load and display events
            async function loadEvents() {
                const eventWindow = document.getElementById('eventWindow');
                const eventContent = document.getElementById('eventContent');
                
                if (!eventWindow || !eventContent) {
                    console.log('Event window elements not found');
                    return;
                }

                console.log('Loading events...');
                
                let eventsData = null;

                // Try to load from CMS
                try {
                    const response = await fetch('/.netlify/functions/get-events');
                    if (response.ok) {
                        eventsData = await response.json();
                        console.log('Events loaded from CMS:', eventsData);
                        
                        if (!eventsData || eventsData.length === 0) {
                            throw new Error('CMS returned empty events data');
                        }
                    } else {
                        throw new Error(`CMS responded with status: ${response.status}`);
                    }
                } catch (error) {
                    console.log('CMS not available, using fallback events:', error.message);
                    eventsData = FALLBACK_EVENT_DATA;
                }

                // Filter active events
                const activeEvents = eventsData.filter(event => event.active);

                if (activeEvents.length > 0) {
                    const event = activeEvents[0];
                    
                    eventContent.innerHTML = `
                        <div class="event-header">
                            <h3>${event.title}</h3>
                            <p>${event.artist}</p>
                        </div>
                        <div class="event-details">
                            <strong>📅 ${formatEventDate(event.date)}, ${event.startTime}</strong>
                            ${event.description}
                            
                            <strong>🎵 musik-stil:</strong>
                            ${event.musicStyle}
                        </div>
                        ${event.audioPreview ? `
                            <div class="audio-player">
                                <h4>hör rein in den sound:</h4>
                                <audio controls>
                                    <source src="${event.audioPreview}" type="audio/mpeg">
                                    dein browser unterstützt kein audio.
                                </audio>
                            </div>
                        ` : ''}
                    `;
                    
                    eventWindow.style.display = 'block';
                    console.log('Event window displayed successfully');
                } else {
                    eventWindow.style.display = 'none';
                    console.log('No active events found');
                }
            }

            // Initialize content loading
            function initializeContent() {
                console.log('Initializing CMS content loader...');
                
                // Load content immediately
                loadMenu();
                loadEvents();

                // Set up periodic refresh
                setInterval(() => {
                    console.log('Refreshing content...');
                    loadMenu();
                    loadEvents();
                }, CONFIG.refreshInterval);
            }

            // Wait for DOM to be ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initializeContent);
            } else {
                initializeContent();
            }

            // Expose functions globally for debugging
            window.cmsLoader = {
                loadMenu,
                loadEvents,
                refresh: initializeContent
            };

        })();

        // Toggle Event Window
        function toggleEventWindow() {
            const eventWindow = document.getElementById('eventWindow');
            const toggleIcon = document.getElementById('toggleIcon');
            
            if (eventWindow && toggleIcon) {
                eventWindow.classList.toggle('collapsed');
                toggleIcon.textContent = eventWindow.classList.contains('collapsed') ? '🎵' : '−';
            }
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Simple fallback loading message replacement
        setTimeout(() => {
            const noMenuMessage = document.querySelector('.no-menu-message');
            if (noMenuMessage && noMenuMessage.textContent.includes('wird geladen')) {
                noMenuMessage.innerHTML = `
                    <p>Menu wird vom CMS geladen...</p>
                    <p style="font-size: 14px; margin-top: 10px; color: var(--text-light);">
                        Falls nichts erscheint, ist das CMS noch nicht konfiguriert. 
                        Die Fallback-Daten sollten in Kürze angezeigt werden.
                    </p>
                `;
            }
        }, 3000);

        console.log('Enhanced Healthy Brunch Club website loaded successfully!');
    </script>
</body>
</html>
